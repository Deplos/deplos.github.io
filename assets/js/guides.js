import{GuideController}from"./guide/guideController.js";import{getLanguage}from"./lib/getInfo.js";const guideController=new GuideController(getLanguage());function setGuides(e){const t=document.querySelector(".guides");if(t.innerHTML="",!e.length)return t.classList.value="guides empty";t.classList.value="guides",e.forEach((e=>{const i=document.createElement("a");i.classList.add("guide"),i.setAttribute("href",`/${getLanguage()}/guide.html?id=${e.id}`),i.innerHTML=`\n            <img src="${e.previewUrl??""}" alt="${e.title}" class="guide__image ${e.previewUrl?"loaded":""}">\n            <div class="guide__info">\n                <div class="guide__tags">\n                    ${e.tags.map((e=>`<span class="tag" data-id="${e.id}">${e.name}</span>`)).join("")}\n                </div>\n                <div class="guide__date">${e.updatedAt.toLocaleDateString()}</div>\n            </div>\n            <h3 class="guide__title">${e.title}</h3>\n     \n        `,t.appendChild(i)}))}function setupSearch(){document.getElementById("search").addEventListener("keyup",(async e=>{if("Enter"!==e.key)return;const t=e.target.value;if(""===t){return void setGuides(await guideController.getAllGuides())}setGuides(await guideController.searchGuides(t))}))}async function init(){setupSearch(),setGuides(await guideController.getAllGuides())}init();